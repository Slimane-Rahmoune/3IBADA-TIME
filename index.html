<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ø¬Ø¯ÙˆÙ„ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆÙ‚Øª</title>
<style>
  :root{
    --bg:#eef6ff;--card:#fff;--text:#0f1a2b;--muted:#5f6b7a;--shadow:0 1px 4px rgba(0,0,0,.12);
    --brand:#1e88e5;--now:#13b38b;--accent:#0ea5e9;
  }
  /* --- Dark mode variables --- */
  .dark{
    --bg:#0b1220; --card:#111827; --text:#e5eefc; --muted:#9aa4b2;
    --shadow:0 1px 4px rgba(0,0,0,.5); --brand:#3b82f6; --now:#10b981; --accent:#38bdf8;
  }

  html,body{height:100%}
  body{margin:14px;background:var(--bg);font-family:Tahoma,Arial,sans-serif;color:var(--text)}
  .wrap{max-width:1000px;margin:0 auto}

  header{display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:space-between;margin-bottom:10px}
  h1{font-size:20px;margin:0}
  .row{display:flex;gap:10px;align-items:center}
  select,button,input[type="text"]{border:1px solid #cfd8e3;background:#fff;border-radius:8px;padding:8px 10px;cursor:pointer}
  .primary{background:var(--brand);color:#fff;border:none}
  .card{background:var(--card);box-shadow:var(--shadow);border-radius:12px;padding:12px;margin:12px 0}
  .muted{color:var(--muted);font-size:12px}

  .dark select,.dark button,.dark input[type="text"]{background:#0f172a;color:var(--text);border-color:#334155}
  .dark .card{background:var(--card)}
  .dark .dhk,.dark .task{border-color:#233146}
  .dark .badge{background:#0b2540;border-color:#1e3a5f;color:#cfe8ff}
  .dark .tag{background:#132238;border-color:#1e2b46;color:#cde4ff}

  /* nav */
  .tabs{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:8px}
  .tab{padding:8px 12px;border-radius:10px;border:1px solid #cfd8e3;background:#fff;cursor:pointer}
  .tab.active{background:var(--accent);border-color:var(--accent);color:#fff}

  /* planning */
  .task{display:flex;align-items:center;justify-content:space-between;padding:10px;border:1px solid #e9eef5;border-radius:10px;margin:6px 0}
  .left{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
  .time{font-weight:bold;min-width:150px}
  .badge{font-size:12px;background:#e8f1ff;border:1px solid #cfe0ff;border-radius:999px;padding:2px 8px}
  .ltr{direction:ltr; unicode-bidi:embed;} /* <â€” force LTR pour les heures */
  .now{border-color:var(--now);box-shadow:0 0 0 2px rgba(19,179,139,.15)}
  .now .badge{background:#e9fff7;border-color:#b9f1df}
  .nowTag{font-size:12px;color:#0f8a6a;margin-inline-start:6px}
  .done{text-decoration:line-through;color:#777}
  .toolbar{display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-end;margin-bottom:8px}
  .status{min-height:18px;margin-top:6px}
  input[type="checkbox"]{width:20px;height:20px;accent-color:var(--brand)}
  @media (max-width:560px){.time{min-width:auto}}

  /* adhkar */
  .adh-toolbar{display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin-bottom:8px}
  .sectionHead{display:flex;align-items:center;justify-content:space-between;margin:10px 0 6px 0}
  .catTitle{font-weight:bold}
  .sectionActions{display:flex;gap:6px}
  .dhk{border:1px solid #e6ebf2;border-radius:10px;padding:10px;margin:8px 0}
  .dhk h4{margin:0 0 6px 0;font-size:16px}
  .dhk p{margin:4px 0}
  .dhk .controls{display:flex;gap:6px;align-items:center;flex-wrap:wrap;margin-top:6px}
  .counter{min-width:46px;text-align:center;border-radius:8px;border:1px solid #cfd8e3;padding:4px 8px}
  .tag{display:inline-block;font-size:12px;background:#fafafa;border:1px solid #e8e8e8;border-radius:999px;padding:2px 8px;margin-inline-start:6px}
  .divider{height:1px;background:#e9eef5;margin:8px 0}

  /* quran */
  .qrow{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:8px}
  iframe{width:100%;height:70vh;border:none;border-radius:12px;box-shadow:var(--shadow)}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <h1 id="title">ğŸ•°ï¸ Ø¬Ø¯ÙˆÙ„ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆÙ‚Øª Ø¹Ù„Ù‰ Ù…Ù†Ù‡Ø¬ Ø§Ù„Ù†Ø¨ÙŠ ï·º</h1>
    <div class="row">
      <button id="themeBtn">ğŸŒ™ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†</button>
      <label for="lang" id="langLabel">Ø§Ù„Ù„ØºØ©:</label>
      <select id="lang">
        <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
        <option value="fr">FranÃ§ais</option>
        <option value="en">English</option>
      </select>
      <button id="notifyBtn" class="primary">ğŸ”” ÙØ¹Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</button>
    </div>
  </header>

  <!-- NAV -->
  <div class="tabs">
    <button class="tab active" data-page="plan" id="tab-plan">ğŸ“‹ Ø§Ù„ØªØ®Ø·ÙŠØ·</button>
    <button class="tab" data-page="adhkar" id="tab-adhkar">ğŸ•¯ï¸ Ø§Ù„Ø£Ø°ÙƒØ§Ø±</button>
    <button class="tab" data-page="quran" id="tab-quran">ğŸ“– Ø§Ù„Ù‚Ø±Ø¢Ù†</button>
  </div>

  <!-- PAGE: PLAN -->
  <section id="page-plan" class="card">
    <div class="toolbar">
      <button id="checkAll" class="primary">âœ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙƒÙ„</button>
      <button id="uncheckAll">â†©ï¸ Ø¥Ù„ØºØ§Ø¡ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙƒÙ„</button>
      <button id="resetDay">ğŸ—“ï¸ ØªØµÙÙŠØ± Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ…</button>
    </div>
    <div id="tasks"></div>
    <div id="progress" class="status muted"></div>
  </section>

  <!-- PAGE: ADHKAR -->
  <section id="page-adhkar" class="card" style="display:none">
    <div class="adh-toolbar">
      <label for="slotSel" id="slotLabel">Ø§Ø®ØªØ± Ø§Ù„ÙØªØ±Ø©:</label>
      <select id="slotSel"></select>
      <input type="text" id="adhSearch" placeholder="Ø¨Ø­Ø« / Recherche / Search" />
      <button id="resetAdhkar" class="primary">â†º ØªØµÙÙŠØ± Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
    </div>
    <div id="adhkarList"></div>
    <p class="muted" id="adhkarHint">ÙŠØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø­Ù„ÙŠÙ‹Ø§ Ù„ÙƒÙ„ ÙØªØ±Ø© ÙˆÙ„ØºØ©.</p>
  </section>

  <!-- PAGE: QURAN -->
  <section id="page-quran" class="card" style="display:none">
    <div class="qrow">
      <label id="qLabel1">Ø³ÙˆØ±Ø©:</label>
      <select id="surahSel"></select>
      <label id="qLabel2">Ø¬Ø²Ø¡ (Juz):</label>
      <select id="juzSel"></select>
      <button id="openSurah" class="primary">ÙØªØ­</button>
      <button id="markRead">âœ… ØªÙ…Ù‘Øª Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©</button>
      <button id="resetRead">â†º ØªØµÙÙŠØ±</button>
    </div>
    <div class="muted" id="readStatus"></div>
    <iframe id="qFrame" title="Quran"></iframe>
    <p class="muted" id="qHint">Ù…Ù„Ø§Ø­Ø¸Ø©: ÙŠØªÙ… ØªØ¶Ù…ÙŠÙ† Ù‚Ø§Ø±Ø¦ Ù…Ù† quran.com. Ù‚Ø¯ ÙŠØ·Ù„Ø¨ Ø§Ù„Ù…ØªØµÙØ­ Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„ØªØ¶Ù…ÙŠÙ†.</p>
  </section>

  <p class="muted" id="hint">
    Ù…Ù„Ø§Ø­Ø¸Ø©: ÙŠØªÙ… Ø­ÙØ¸ Ø¥Ù†Ø¬Ø§Ø²Ø§ØªÙƒ Ù…Ø­Ù„ÙŠÙ‹Ø§ ÙŠÙˆÙ…ÙŠÙ‹Ø§. ØªØºÙŠÙ‘Ø± Ø§Ù„Ù„ØºØ© ÙŠØºÙŠÙ‘Ø± Ø£ÙŠØ¶Ù‹Ø§ Ø§ØªØ¬Ø§Ù‡ Ø§Ù„ØµÙØ­Ø© ÙˆÙ†ØµÙˆØµ Ø§Ù„Ù…Ù‡Ø§Ù….
  </p>
</div>

<script>
/* ======================= I18N & DATA ======================= */
const T = {
  ar:{
    title:"ğŸ•°ï¸ Ø¬Ø¯ÙˆÙ„ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆÙ‚Øª Ø¹Ù„Ù‰ Ù…Ù†Ù‡Ø¬ Ø§Ù„Ù†Ø¨ÙŠ ï·º",
    lang:"Ø§Ù„Ù„ØºØ©:", notify:"ğŸ”” ÙØ¹Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª",
    themeDark:"ğŸŒ™ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†", themeLight:"â˜€ï¸ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙØ§ØªØ­",
    tabs:{plan:"ğŸ“‹ Ø§Ù„ØªØ®Ø·ÙŠØ·", adhkar:"ğŸ•¯ï¸ Ø§Ù„Ø£Ø°ÙƒØ§Ø±", quran:"ğŸ“– Ø§Ù„Ù‚Ø±Ø¢Ù†"},
    checkAll:"âœ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙƒÙ„", uncheckAll:"â†©ï¸ Ø¥Ù„ØºØ§Ø¡ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙƒÙ„", resetDay:"ğŸ—“ï¸ ØªØµÙÙŠØ± Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ…",
    hint:"Ù…Ù„Ø§Ø­Ø¸Ø©: ÙŠØªÙ… Ø­ÙØ¸ Ø¥Ù†Ø¬Ø§Ø²Ø§ØªÙƒ Ù…Ø­Ù„ÙŠÙ‹Ø§ ÙŠÙˆÙ…ÙŠÙ‹Ø§. ØªØºÙŠÙ‘Ø± Ø§Ù„Ù„ØºØ© ÙŠØºÙŠÙ‘Ø± Ø£ÙŠØ¶Ù‹Ø§ Ø§ØªØ¬Ø§Ù‡ Ø§Ù„ØµÙØ­Ø© ÙˆÙ†ØµÙˆØµ Ø§Ù„Ù…Ù‡Ø§Ù….",
    notified:"âœ… ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª", noNotif:"ğŸš« Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª",
    now:"Ø£Ù†Øª Ø§Ù„Ø¢Ù† Ù‡Ù†Ø§", interval:(a,b)=>`${a} â€“ ${b}`,
    tasks:[
      {start:"04:30", end:"05:30", time:"Ù‚Ø¨Ù„ Ø§Ù„ÙØ¬Ø±", action:"Ù‚ÙŠØ§Ù… Ø§Ù„Ù„ÙŠÙ„ ÙˆØ°ÙƒØ± Ø§Ù„Ù„Ù‡"},
      {start:"05:30", end:"07:00", time:"Ø§Ù„ÙØ¬Ø± â€“ Ø§Ù„Ø´Ø±ÙˆÙ‚", action:"ØµÙ„Ø§Ø© Ø§Ù„ÙØ¬Ø± + Ø°ÙƒØ± ÙˆÙ‚Ø±Ø¢Ù†"},
      {start:"07:00", end:"10:00", time:"Ø§Ù„ØµØ¨Ø§Ø­", action:"Ø¹Ù…Ù„/Ø¯Ø±Ø§Ø³Ø© Ø¨Ù†ÙŠØ© Ù„Ù„Ù‡"},
      {start:"10:00", end:"12:30", time:"Ø§Ù„Ø¶Ø­Ù‰", action:"Ø±ÙƒØ¹ØªØ§Ù† Ø£Ùˆ Ø£Ø±Ø¨Ø¹"},
      {start:"12:30", end:"15:30", time:"Ø§Ù„Ø¸Ù‡Ø±", action:"ØµÙ„Ø§Ø© + Ù‚ÙŠÙ„ÙˆÙ„Ø©"},
      {start:"15:30", end:"18:30", time:"Ø§Ù„Ø¹ØµØ± â€“ Ø§Ù„Ù…ØºØ±Ø¨", action:"Ø¹Ù…Ù„/Ø¹Ù„Ù… + Ø±ÙŠØ§Ø¶Ø©"},
      {start:"18:30", end:"21:00", time:"Ø§Ù„Ù…ØºØ±Ø¨ â€“ Ø§Ù„Ø¹Ø´Ø§Ø¡", action:"Ø¬Ù„Ø³Ø© Ø¹Ø§Ø¦Ù„ÙŠØ© + Ù‚Ø±Ø¢Ù†"},
      {start:"21:00", end:"23:00", time:"Ø§Ù„Ø¹Ø´Ø§Ø¡", action:"ØµÙ„Ø§Ø© + Ø±Ø§Ø­Ø©/Ù…Ø·Ø§Ù„Ø¹Ø©"},
      {start:"23:00", end:"04:30", time:"Ø§Ù„Ù„ÙŠÙ„", action:"Ù†ÙˆÙ… Ù…Ø¨ÙƒØ± + Ù‚ÙŠØ§Ù… Ø§Ù„Ù„ÙŠÙ„"}
    ],
    progress:(d,t)=>`Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„ÙŠÙˆÙ…: ${d}/${t} (${Math.round(d*100/t)}%)`,
    slotLabel:"Ø§Ø®ØªØ± Ø§Ù„ÙØªØ±Ø©:", adhkarHint:"ÙŠØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø­Ù„ÙŠÙ‹Ø§ Ù„ÙƒÙ„ ÙØªØ±Ø© ÙˆÙ„ØºØ©.",
    resetAdhkar:"â†º ØªØµÙÙŠØ± Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª",
    slots:[
      {key:"all", name:"ÙƒÙ„ Ø§Ù„Ø£Ø°ÙƒØ§Ø±"},
      {key:"morning", name:"Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­"},
      {key:"afterPrayer", name:"Ø¨Ø¹Ø¯ Ø§Ù„ØµÙ„ÙˆØ§Øª"},
      {key:"evening", name:"Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¡"},
      {key:"sleep", name:"Ù‚Ø¨Ù„ Ø§Ù„Ù†ÙˆÙ…"},
      {key:"home", name:"Ø§Ù„Ø¨ÙŠØª (Ø¯Ø®ÙˆÙ„/Ø®Ø±ÙˆØ¬/Ø·Ø¹Ø§Ù…/Ù„Ø¨Ø§Ø³/Ø³ÙØ±)"}
    ],
    adhkar:{
      morning:[
        {txt:"Ø£ØµØ¨Ø­Ù†Ø§ ÙˆØ£ØµØ¨Ø­ Ø§Ù„Ù…Ù„Ùƒ Ù„Ù„Ù‡â€¦", count:1, ref:"Ù…Ø³Ù„Ù…"},
        {txt:"Ø³ÙŠØ¯ Ø§Ù„Ø§Ø³ØªØºÙØ§Ø±: Ø§Ù„Ù„Ù‡Ù… Ø£Ù†Øª Ø±Ø¨ÙŠ Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø£Ù†Øªâ€¦", count:1, ref:"Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ"},
        {txt:"Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø­Ù…Ø¯Ù‡", count:100, ref:"Ù…Ø³Ù„Ù…"},
        {txt:"Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡ ÙˆØ­Ø¯Ù‡ Ù„Ø§ Ø´Ø±ÙŠÙƒ Ù„Ù‡â€¦", count:100, ref:"Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ"}
      ],
      afterPrayer:[
        {txt:"Ø£Ø³ØªØºÙØ± Ø§Ù„Ù„Ù‡ (Ù£) Ø«Ù…: Ø§Ù„Ù„Ù‡Ù… Ø£Ù†Øª Ø§Ù„Ø³Ù„Ø§Ù… ÙˆÙ…Ù†Ùƒ Ø§Ù„Ø³Ù„Ø§Ù…â€¦", count:1, ref:"Ù…Ø³Ù„Ù…"},
        {txt:"Ø§Ù„ØªØ³Ø¨ÙŠØ­ 33ØŒ Ø§Ù„ØªØ­Ù…ÙŠØ¯ 33ØŒ Ø§Ù„ØªÙƒØ¨ÙŠØ± 33ØŒ ØªÙ…Ø§Ù… Ø§Ù„Ù…Ø¦Ø©: Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡â€¦", count:1, ref:"Ù…Ø³Ù„Ù…"},
        {txt:"Ø¢ÙŠØ© Ø§Ù„ÙƒØ±Ø³ÙŠ", count:1, ref:"Ø­Ø³Ù† Ø¹Ù†Ø¯ Ø¨Ø¹Ø¶ Ø£Ù‡Ù„ Ø§Ù„Ø¹Ù„Ù…"}
      ],
      evening:[
        {txt:"Ø£Ù…Ø³ÙŠÙ†Ø§ ÙˆØ£Ù…Ø³Ù‰ Ø§Ù„Ù…Ù„Ùƒ Ù„Ù„Ù‡â€¦", count:1, ref:"Ù…Ø³Ù„Ù…"},
        {txt:"Ù‚Ù„ Ù‡Ùˆ Ø§Ù„Ù„Ù‡ Ø£Ø­Ø¯ + Ø§Ù„Ù…Ø¹ÙˆØ°ØªØ§Ù†", count:3, ref:"Ø£Ø¨Ùˆ Ø¯Ø§ÙˆØ¯"},
        {txt:"Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø­Ù…Ø¯Ù‡", count:100, ref:"Ù…Ø³Ù„Ù…"}
      ],
      sleep:[
        {txt:"Ø¨Ø§Ø³Ù…Ùƒ Ø§Ù„Ù„Ù‡Ù… Ø£Ù…ÙˆØª ÙˆØ£Ø­ÙŠØ§", count:1, ref:"Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ"},
        {txt:"Ø¢ÙŠØ© Ø§Ù„ÙƒØ±Ø³ÙŠ", count:1, ref:"Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ"},
        {txt:"Ù‚Ù„ Ù‡Ùˆ Ø§Ù„Ù„Ù‡ Ø£Ø­Ø¯ + Ø§Ù„Ù…Ø¹ÙˆØ°ØªØ§Ù† (Ù†ÙØ« Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙÙŠÙ† ÙˆÙ…Ø³Ø­ Ø§Ù„Ø¬Ø³Ø¯)", count:1, ref:"Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ"}
      ],
      home:[
        {txt:"Ø¯Ø¹Ø§Ø¡ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¨ÙŠØª: Ø¨Ø³Ù… Ø§Ù„Ù„Ù‡ ÙˆÙ„Ø¬Ù†Ø§ ÙˆØ¨Ø³Ù… Ø§Ù„Ù„Ù‡ Ø®Ø±Ø¬Ù†Ø§â€¦", count:1, ref:"Ø£Ø¨Ùˆ Ø¯Ø§ÙˆØ¯"},
        {txt:"Ø°ÙƒØ± Ø§Ù„Ø·Ø¹Ø§Ù…: Ø¨Ø³Ù… Ø§Ù„Ù„Ù‡ â€” ÙˆØ¨Ø¹Ø¯Ù‡: Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡ Ø§Ù„Ø°ÙŠ Ø£Ø·Ø¹Ù…Ù†Ø§â€¦", count:1, ref:"Ø£Ø¨Ùˆ Ø¯Ø§ÙˆØ¯"},
        {txt:"Ù„Ø¨Ø³ Ø§Ù„Ø«ÙˆØ¨: Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡ Ø§Ù„Ø°ÙŠ ÙƒØ³Ø§Ù†ÙŠ Ù‡Ø°Ø§â€¦", count:1, ref:"Ø£Ø¨Ùˆ Ø¯Ø§ÙˆØ¯"},
        {txt:"Ø³ÙØ±: Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ø°ÙŠ Ø³Ø®Ø± Ù„Ù†Ø§ Ù‡Ø°Ø§â€¦", count:1, ref:"Ù…Ø³Ù„Ù…"}
      ]
    },
    qLabel1:"Ø³ÙˆØ±Ø©:", qLabel2:"Ø¬Ø²Ø¡ (Juz):", open:"ÙØªØ­", markRead:"âœ… ØªÙ…Ù‘Øª Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©", resetRead:"â†º ØªØµÙÙŠØ±",
    readSaved:(s)=>`Ø¢Ø®Ø± Ù‚Ø±Ø§Ø¡Ø© Ù…Ø­ÙÙˆØ¸Ø©: ${s}`
  },
  fr:{
    title:"ğŸ•°ï¸ Planning dâ€™adorations â€“ MÃ©thode prophÃ©tique ï·º",
    lang:"Langue :", notify:"ğŸ”” Activer les notifications",
    themeDark:"ğŸŒ™ Mode sombre", themeLight:"â˜€ï¸ Mode clair",
    tabs:{plan:"ğŸ“‹ Planning", adhkar:"ğŸ•¯ï¸ AdhkÃ¢r", quran:"ğŸ“– Coran"},
    checkAll:"âœ… Tout cocher", uncheckAll:"â†©ï¸ Tout dÃ©cocher", resetDay:"ğŸ—“ï¸ RÃ©initialiser la journÃ©e",
    hint:"Astuce : vos donnÃ©es sont enregistrÃ©es localement (par jour).",
    notified:"âœ… Notifications activÃ©es", noNotif:"ğŸš« Notifications non supportÃ©es",
    now:"Vous Ãªtes ici", interval:(a,b)=>`${a} â€“ ${b}`,
    tasks:[
      {start:"04:30", end:"05:30", time:"Avant lâ€™aube", action:"QiyÃ¢m & rappels"},
      {start:"05:30", end:"07:00", time:"Fajr â€“ Lever du soleil", action:"PriÃ¨re du Fajr + Coran & invocations"},
      {start:"07:00", end:"10:00", time:"Matin", action:"Travail/Ã‰tudes avec intention sincÃ¨re"},
      {start:"10:00", end:"12:30", time:"Duha", action:"2 Ã  4 unitÃ©s de priÃ¨re"},
      {start:"12:30", end:"15:30", time:"Dhuhr", action:"PriÃ¨re + petite sieste"},
      {start:"15:30", end:"18:30", time:"â€˜Asr â€“ Maghrib", action:"Travail/Savoir + Sport"},
      {start:"18:30", end:"21:00", time:"Maghrib â€“ â€˜Isha", action:"Temps en famille + Coran"},
      {start:"21:00", end:"23:00", time:"â€˜Isha", action:"PriÃ¨re + Lecture/Repos"},
      {start:"23:00", end:"04:30", time:"Nuit", action:"Coucher tÃ´t + QiyÃ¢m"}
    ],
    progress:(d,t)=>`Progression : ${d}/${t} (${Math.round(d*100/t)}%)`,
    slotLabel:"CrÃ©neau :", adhkarHint:"Les compteurs sont enregistrÃ©s localement par crÃ©neau.",
    resetAdhkar:"â†º RÃ©initialiser",
    slots:[
      {key:"all", name:"Tous les adhkÃ¢r"},
      {key:"morning", name:"AdhkÃ¢r du matin"},
      {key:"afterPrayer", name:"AprÃ¨s les priÃ¨res"},
      {key:"evening", name:"AdhkÃ¢r du soir"},
      {key:"sleep", name:"Avant de dormir"},
      {key:"home", name:"Maison (entrer/sortir/repas/habit/voyage)"}
    ],
    adhkar:{
      morning:[
        {txt:"Nous entrons au matinâ€¦", count:1, ref:"Muslim"},
        {txt:"Sayyid al-IstighfÃ¢r", count:1, ref:"Bukhari"},
        {txt:"SubhÃ¢nAllÃ¢h wa bi-hamdih", count:100, ref:"Muslim"},
        {txt:"LÃ¢ ilÃ¢ha illÃ¢ AllÃ¢h waá¸¥dahuâ€¦", count:100, ref:"Bukhari"}
      ],
      afterPrayer:[
        {txt:"Istighfar (3) puis Â« Allahumma anta as-SalÃ¢mâ€¦ Â»", count:1, ref:"Muslim"},
        {txt:"33 tasbÃ®h, 33 tahmÃ®d, 33 takbÃ®r + tamÃ¢m 100", count:1, ref:"Muslim"},
        {txt:"Ã‚yat al-KursÃ®", count:1, ref:"Hasan (selon certains)"}
      ],
      evening:[
        {txt:"Nous entrons au soirâ€¦", count:1, ref:"Muslim"},
        {txt:"IkhlÃ¢s + Falaq + NÃ¢s (x3)", count:3, ref:"Abu Dawud"},
        {txt:"SubhÃ¢nAllÃ¢h wa bi-hamdih", count:100, ref:"Muslim"}
      ],
      sleep:[
        {txt:"Bismika AllÃ¢humma amÃ»tu wa ahyÃ¢", count:1, ref:"Bukhari"},
        {txt:"Ã‚yat al-KursÃ®", count:1, ref:"Bukhari"},
        {txt:"IkhlÃ¢s + Falaq + NÃ¢s", count:1, ref:"Bukhari"}
      ],
      home:[
        {txt:"Entrer Ã  la maison", count:1, ref:"Abu Dawud"},
        {txt:"Avant/aprÃ¨s le repas", count:1, ref:"Abu Dawud"},
        {txt:"Mettre un vÃªtement", count:1, ref:"Abu Dawud"},
        {txt:"Invocation du voyage", count:1, ref:"Muslim"}
      ]
    },
    qLabel1:"Sourate :", qLabel2:"Juz :", open:"Ouvrir", markRead:"âœ… Lu", resetRead:"â†º RÃ©initialiser",
    readSaved:(s)=>`DerniÃ¨re lecture : ${s}`
  },
  en:{
    title:"ğŸ•°ï¸ Time Management â€“ Prophetic Way ï·º",
    lang:"Language:", notify:"ğŸ”” Enable notifications",
    themeDark:"ğŸŒ™ Dark mode", themeLight:"â˜€ï¸ Light mode",
    tabs:{plan:"ğŸ“‹ Plan", adhkar:"ğŸ•¯ï¸ Adhkar", quran:"ğŸ“– Quran"},
    checkAll:"âœ… Check all", uncheckAll:"â†©ï¸ Uncheck all", resetDay:"ğŸ—“ï¸ Reset today",
    hint:"Your data is stored locally per day.",
    notified:"âœ… Notifications enabled", noNotif:"ğŸš« Notifications not supported",
    now:"You are here", interval:(a,b)=>`${a} â€“ ${b}`,
    tasks:[
      {start:"04:30", end:"05:30", time:"Before Fajr", action:"Qiyam & remembrance"},
      {start:"05:30", end:"07:00", time:"Fajr â€“ Sunrise", action:"Fajr + Qurâ€™an & adhkar"},
      {start:"07:00", end:"10:00", time:"Morning", action:"Work/Study with sincere intention"},
      {start:"10:00", end:"12:30", time:"Duha", action:"2â€“4 units of prayer"},
      {start:"12:30", end:"15:30", time:"Dhuhr", action:"Prayer + short nap"},
      {start:"15:30", end:"18:30", time:"Asr â€“ Maghrib", action:"Work/Knowledge + Exercise"},
      {start:"18:30", end:"21:00", time:"Maghrib â€“ Isha", action:"Family time + Qurâ€™an"},
      {start:"21:00", end:"23:00", time:"Isha", action:"Prayer + Reading/Rest"},
      {start:"23:00", end:"04:30", time:"Night", action:"Sleep early + Qiyam"}
    ],
    progress:(d,t)=>`Todayâ€™s progress: ${d}/${t} (${Math.round(d*100/t)}%)`,
    slotLabel:"Choose slot:", adhkarHint:"Counters are saved locally per slot.",
    resetAdhkar:"â†º Reset counters",
    slots:[
      {key:"all", name:"All adhkar"},
      {key:"morning", name:"Morning adhkar"},
      {key:"afterPrayer", name:"After prayers"},
      {key:"evening", name:"Evening adhkar"},
      {key:"sleep", name:"Before sleep"},
      {key:"home", name:"Home (enter/leave/food/clothes/travel)"}
    ],
    adhkar:{
      morning:[
        {txt:"We enter the morningâ€¦", count:1, ref:"Muslim"},
        {txt:"Sayyid al-Istighfar", count:1, ref:"Bukhari"},
        {txt:"SubhanAllah wa bihamdih", count:100, ref:"Muslim"},
        {txt:"La ilaha illa Allah wahdahuâ€¦", count:100, ref:"Bukhari"}
      ],
      afterPrayer:[
        {txt:"Istighfar (3) then: Allahumma anta as-Salamâ€¦", count:1, ref:"Muslim"},
        {txt:"33 Tasbih, 33 Tahmid, 33 Takbir + completion to 100", count:1, ref:"Muslim"},
        {txt:"Ayat al-Kursi", count:1, ref:"Hasan (per some scholars)"}
      ],
      evening:[
        {txt:"We enter the eveningâ€¦", count:1, ref:"Muslim"},
        {txt:"Ikhlas + Falaq + Nas (x3)", count:3, ref:"Abu Dawud"},
        {txt:"SubhanAllah wa bihamdih", count:100, ref:"Muslim"}
      ],
      sleep:[
        {txt:"Bismika Allahumma amutu wa ahya", count:1, ref:"Bukhari"},
        {txt:"Ayat al-Kursi", count:1, ref:"Bukhari"},
        {txt:"Ikhlas + Falaq + Nas", count:1, ref:"Bukhari"}
      ],
      home:[
        {txt:"Entering home", count:1, ref:"Abu Dawud"},
        {txt:"Before/after meal", count:1, ref:"Abu Dawud"},
        {txt:"Wearing a garment", count:1, ref:"Abu Dawud"},
        {txt:"Travel invocation", count:1, ref:"Muslim"}
      ]
    },
    qLabel1:"Surah:", qLabel2:"Juz:", open:"Open", markRead:"âœ… Mark read", resetRead:"â†º Reset",
    readSaved:(s)=>`Last reading: ${s}`
  }
};

// 114 surahs (abrÃ©gÃ©)
const SURAH_NAMES=["Al-FÄtiá¸¥ah","Al-Baqarah","Ä€l â€˜ImrÄn","An-NisÄâ€™","Al-MÄâ€™idah","Al-Anâ€˜Äm","Al-Aâ€˜rÄf","Al-AnfÄl","At-Tawbah","YÅ«nus","HÅ«d","YÅ«suf","Ar-Raâ€˜d","IbrÄhÄ«m","Al-á¸¤ijr","An-Naá¸¥l","Al-IsrÄâ€™","Al-Kahf","Maryam","á¹¬Ä HÄ","Al-AnbiyÄâ€™","Al-á¸¤ajj","Al-Muâ€™minÅ«n","An-NÅ«r","Al-FurqÄn","Ash-Shuâ€˜arÄâ€™","An-Naml","Al-Qaá¹£aá¹£","Al-â€˜AnkabÅ«t","Ar-RÅ«m","LuqmÄn","As-Sajdah","Al-Aá¸¥zÄb","Sabaâ€™","FÄá¹­ir","YÄ SÄ«n","As-á¹¢ÄffÄt","á¹¢Äd","Az-Zumar","GhÄfir","Fuá¹£á¹£ilat","Ash-ShÅ«rÄ","Az-Zukhruf","Ad-DukhÄn","Al-JÄthiyah","Al-Aá¸¥qÄf","Muá¸¥ammad","Al-Fatá¸¥","Al-á¸¤ujurÄt","QÄf","Adh-DhÄriyÄt","Aá¹­-á¹¬Å«r","An-Najm","Al-Qamar","Ar-Raá¸¥mÄn","Al-WÄqiâ€˜ah","Al-á¸¤adÄ«d","Al-MujÄdilah","Al-á¸¤ashr","Al-Mumtaá¸¥anah","Aá¹£-á¹¢aff","Al-Jumuâ€˜ah","Al-MunÄfiqÅ«n","At-TaghÄbun","Aá¹­-á¹¬alÄq","At-Taá¸¥rÄ«m","Al-Mulk","Al-Qalam","Al-á¸¤Äqqah","Al-Maâ€˜Ärij","NÅ«á¸¥","Al-Jinn","Al-Muzzammil","Al-Muddaththir","Al-QiyÄmah","Al-InsÄn","Al-MursalÄt","An-Nabaâ€™","An-NÄziâ€˜Ät","â€˜Abasa","At-TakwÄ«r","Al-Infiá¹­Är","Al-Muá¹­affifÄ«n","Al-InshiqÄq","Al-BurÅ«j","Aá¹­-á¹¬Äriq","Al-Aâ€˜lÄ","Al-GhÄshiyah","Al-Fajr","Al-Balad","Ash-Shams","Al-Layl","Aá¸-á¸Œuá¸¥Ä","Ash-Shará¸¥","At-TÄ«n","Al-â€˜Alaq","Al-Qadr","Al-Bayyinah","Az-Zalzalah","Al-â€˜Ä€diyÄt","Al-QÄriâ€˜ah","At-TakÄthur","Al-â€˜Aá¹£r","Al-Humazah","Al-FÄ«l","Quraysh","Al-MÄâ€˜Å«n","Al-Kawthar","Al-KÄfirÅ«n","An-Naá¹£r","Al-Masad","Al-IkhlÄá¹£","Al-Falaq","An-NÄs"];

/* ======================= HELPERS ======================= */
const $=s=>document.querySelector(s);
const todayKey=()=>new Date().toISOString().slice(0,10);
const prefLangKey="pref_lang";
const planStoreKey=lang=>`done_${todayKey()}_${lang}`;
const adhkarStoreKey=(lang,slot)=>`adhkar_${todayKey()}_${lang}_${slot}`;
const quranStoreKey=lang=>`qread_${todayKey()}_${lang}`;
const themeKey="pref_theme";
function loadJSON(k){try{return JSON.parse(localStorage.getItem(k)||"{}");}catch{return {}}}
function saveJSON(k,v){localStorage.setItem(k,JSON.stringify(v));}

/* ======================= ELEMENTS ======================= */
const titleEl=$("#title"), langSel=$("#lang"), notifyBtn=$("#notifyBtn"),
  tabPlan=$("#tab-plan"), tabAdhkar=$("#tab-adhkar"), tabQuran=$("#tab-quran"),
  pagePlan=$("#page-plan"), pageAdhkar=$("#page-adhkar"), pageQuran=$("#page-quran"),
  hintEl=$("#hint"), themeBtn=$("#themeBtn");

const checkAllBtn=$("#checkAll"), uncheckAllBtn=$("#uncheckAll"), resetDayBtn=$("#resetDay"),
  tasksEl=$("#tasks"), progressEl=$("#progress");

const slotLabel=$("#slotLabel"), slotSel=$("#slotSel"), adhSearch=$("#adhSearch"),
  adhkarList=$("#adhkarList"), resetAdhkar=$("#resetAdhkar"), adhkarHint=$("#adhkarHint");

const qLabel1=$("#qLabel1"), qLabel2=$("#qLabel2"), surahSel=$("#surahSel"),
  juzSel=$("#juzSel"), openSurah=$("#openSurah"), qFrame=$("#qFrame"),
  markRead=$("#markRead"), resetRead=$("#resetRead"), readStatus=$("#readStatus"), qHint=$("#qHint");

/* ======================= THEME ======================= */
function getTheme(){ return localStorage.getItem(themeKey) || "light"; }
function applyTheme(t){ if(t==="dark") document.documentElement.classList.add("dark"); else document.documentElement.classList.remove("dark"); }
function updateThemeBtn(lang){ const L=T[lang]; const isDark=document.documentElement.classList.contains("dark"); themeBtn.textContent=isDark?L.themeLight:L.themeDark; }
function toggleTheme(lang){ const next=getTheme()==="dark"?"light":"dark"; localStorage.setItem(themeKey,next); applyTheme(next); updateThemeBtn(lang); }

/* ======================= TIME UTILS ======================= */
function timeToDate(hhmm){const[h,m]=hhmm.split(":").map(n=>parseInt(n,10));const n=new Date();return new Date(n.getFullYear(),n.getMonth(),n.getDate(),h,m,0,0);}
function isNowInInterval(start,end){
  const now=new Date();
  let s=timeToDate(start), e=timeToDate(end);
  if(e<=s){ e=new Date(e.getTime()+24*60*60*1000); }
  let n=now;
  if(now<s && e-s>12*60*60*1000) n=new Date(now.getTime()+24*60*60*1000);
  return n>=s && n<e;
}

/* ======================= PLAN ======================= */
function renderPlan(lang,L){
  $("#tab-plan").textContent=L.tabs.plan;
  checkAllBtn.textContent=L.checkAll; uncheckAllBtn.textContent=L.uncheckAll; resetDayBtn.textContent=L.resetDay;

  const doneMap=loadJSON(planStoreKey(lang));
  tasksEl.innerHTML="";
  L.tasks.forEach((t,i)=>{
    const checked=!!doneMap[i];
    const row=document.createElement("div");
    row.className="task";
    const inNow=isNowInInterval(t.start,t.end);
    const nowTag=inNow?`<span class="nowTag">â€¢ ${L.now}</span>`:"";
    if(inNow) row.classList.add("now");
    row.innerHTML=`
      <div class="left">
        <input type="checkbox" id="chk-${i}" ${checked?"checked":""}/>
        <span class="time">${t.time}:</span>
        <span id="txt-${i}" class="${checked?"done":""}">${t.action}</span>
        <span class="badge"><span class="ltr">${t.start} â€“ ${t.end}</span></span>
        ${nowTag}
      </div>
      <div></div>`;
    tasksEl.appendChild(row);
  });
  L.tasks.forEach((_,i)=>{
    $("#chk-"+i).addEventListener("change",e=>{
      const dm=loadJSON(planStoreKey(lang)); dm[i]=e.target.checked; saveJSON(planStoreKey(lang),dm);
      $("#txt-"+i).classList.toggle("done",e.target.checked); updateProgress(lang,L);
    });
  });
  updateProgress(lang,L);
}
function updateProgress(lang,L){const dm=loadJSON(planStoreKey(lang));const total=L.tasks.length,done=Object.values(dm).filter(Boolean).length;progressEl.textContent=L.progress(done,total);}

/* ======================= ADHKAR ======================= */
function renderAdhkar(lang,L){
  $("#tab-adhkar").textContent=L.tabs.adhkar;
  slotLabel.textContent=L.slotLabel; resetAdhkar.textContent=L.resetAdhkar; adhkarHint.textContent=L.adhkarHint;

  slotSel.innerHTML=""; L.slots.forEach(s=>{const opt=document.createElement("option");opt.value=s.key;opt.textContent=s.name;slotSel.appendChild(opt);});
  const cur=localStorage.getItem("adh_slot_"+lang)||L.slots[0].key; slotSel.value=cur;
  drawAdhkarList(lang,L,cur, adhSearch.value.trim());

  slotSel.onchange=()=>{localStorage.setItem("adh_slot_"+lang,slotSel.value);drawAdhkarList(lang,L,slotSel.value, adhSearch.value.trim());};
  resetAdhkar.onclick=()=>{
    if(slotSel.value==="all"){ L.slots.filter(s=>s.key!=="all").forEach(s=>localStorage.removeItem(adhkarStoreKey(lang,s.key))); }
    else{ localStorage.removeItem(adhkarStoreKey(lang,slotSel.value)); }
    drawAdhkarList(lang,L,slotSel.value, adhSearch.value.trim());
  };
  adhSearch.oninput=()=>drawAdhkarList(lang,L,slotSel.value, adhSearch.value.trim());
}
function drawAdhkarList(lang,L,slotKey,query){
  adhkarList.innerHTML="";
  const renderList=(storeKey, headerLabel, items)=>{
    if(!items||items.length===0) return;
    if(headerLabel){
      const head=document.createElement("div");
      head.className="sectionHead";
      head.innerHTML=`<div class="catTitle">${headerLabel}</div>
        <div class="sectionActions">
          <button class="primary" id="${storeKey}-all">${L.checkAll}</button>
          <button id="${storeKey}-reset">${L.resetAdhkar}</button>
        </div>`;
      adhkarList.appendChild(head);
      const divi=document.createElement("div"); divi.className="divider"; adhkarList.appendChild(divi);

      head.querySelector(`#${storeKey}-all`).onclick=()=>{
        const counts=loadJSON(adhkarStoreKey(lang,storeKey)); items.forEach((d,i)=>counts[i]=d.count||1);
        saveJSON(adhkarStoreKey(lang,storeKey),counts); drawAdhkarList(lang,L,slotKey,query);
      };
      head.querySelector(`#${storeKey}-reset`).onclick=()=>{
        localStorage.removeItem(adhkarStoreKey(lang,storeKey)); drawAdhkarList(lang,L,slotKey,query);
      };
    }
    const counts=loadJSON(adhkarStoreKey(lang,storeKey));
    items.forEach((d,idx)=>{
      if(query && !d.txt.toLowerCase().includes(query.toLowerCase())) return;
      const need=d.count||1, cur=counts[idx]||0;
      const div=document.createElement("div");
      div.className="dhk";
      div.innerHTML=`
        <h4>${d.txt}</h4>
        <p class="muted">${d.ref?`<span class="tag">${d.ref}</span>`:""}<span class="tag">x${need}</span></p>
        <div class="controls">
          <button class="primary" id="${storeKey}-plus-${idx}">+1</button>
          <button id="${storeKey}-minus-${idx}">-1</button>
          <span class="counter" id="${storeKey}-count-${idx}">${cur}/${need}</span>
          <button id="${storeKey}-done-${idx}">âœ…</button>
          <button id="${storeKey}-reset-${idx}">â†º</button>
        </div>`;
      adhkarList.appendChild(div);

      const update=(v)=>{
        const c=Math.max(0,Math.min(need,v));
        counts[idx]=c; saveJSON(adhkarStoreKey(lang,storeKey),counts);
        document.getElementById(`${storeKey}-count-${idx}`).textContent=`${c}/${need}`;
      };
      document.getElementById(`${storeKey}-plus-${idx}`).onclick =()=>update((counts[idx]||0)+1);
      document.getElementById(`${storeKey}-minus-${idx}`).onclick=()=>update((counts[idx]||0)-1);
      document.getElementById(`${storeKey}-done-${idx}`).onclick =()=>update(need);
      document.getElementById(`${storeKey}-reset-${idx}`).onclick=()=>update(0);
    });
  };

  if(slotKey==="all"){ L.slots.filter(s=>s.key!=="all").forEach(s=>renderList(s.key,s.name,(L.adhkar[s.key]||[]))); }
  else{ renderList(slotKey,null,(L.adhkar[slotKey]||[])); }
}

/* ======================= QURAN ======================= */
function renderQuran(lang,L){
  $("#tab-quran").textContent=L.tabs.quran;
  qLabel1.textContent=L.qLabel1; qLabel2.textContent=L.qLabel2;
  openSurah.textContent=L.open; markRead.textContent=L.markRead; resetRead.textContent=L.resetRead;

  surahSel.innerHTML=""; SURAH_NAMES.forEach((name,i)=>{const o=document.createElement("option");o.value=String(i+1);o.textContent=`${i+1}. ${name}`;surahSel.appendChild(o);});
  juzSel.innerHTML=""; for(let j=1;j<=30;j++){const o=document.createElement("option");o.value=String(j);o.textContent=`Juz ${j}`;juzSel.appendChild(o);}

  const saved=localStorage.getItem(quranStoreKey(lang)); readStatus.textContent=saved?L.readSaved(saved):"";
  openSurah.onclick=()=>{const s=surahSel.value;const url=`https://quran.com/${s}?reading=false&translations=131&locale=${lang==='ar'?'ar':(lang==='fr'?'fr':'en')}`;qFrame.src=url;};
  markRead.onclick=()=>{const label=`Surah ${surahSel.value} / Juz ${juzSel.value}`;localStorage.setItem(quranStoreKey(lang),label);readStatus.textContent=L.readSaved(label);};
  resetRead.onclick=()=>{localStorage.removeItem(quranStoreKey(lang));readStatus.textContent="";};
}

/* ======================= NOTIFS & PAGES ======================= */
function enableNotifications(L){if(!("Notification" in window)){alert(L.noNotif);return;}if(Notification.permission==="granted"){new Notification(L.notified);}else if(Notification.permission!=="denied"){Notification.requestPermission().then(p=>{if(p==="granted")new Notification(L.notified);});}}
function showPage(key){[pagePlan,pageAdhkar,pageQuran].forEach(p=>p.style.display="none");[tabPlan,tabAdhkar,tabQuran].forEach(t=>t.classList.remove("active"));if(key==="plan"){pagePlan.style.display="block";tabPlan.classList.add("active");}if(key==="adhkar"){pageAdhkar.style.display="block";tabAdhkar.classList.add("active");}if(key==="quran"){pageQuran.style.display="block";tabQuran.classList.add("active");}localStorage.setItem("last_page",key);}

/* ======================= RENDER ALL / INIT ======================= */
function renderAll(lang){
  const rtl=(lang==="ar"); document.documentElement.lang=lang; document.documentElement.dir=rtl?"rtl":"ltr"; document.body.style.direction=rtl?"rtl":"ltr";
  const L=T[lang];
  titleEl.textContent=L.title; document.getElementById("langLabel").textContent=L.lang; notifyBtn.textContent=L.notify; hintEl.textContent=L.hint;
  updateThemeBtn(lang);
  renderPlan(lang,L); renderAdhkar(lang,L); renderQuran(lang,L);
}

document.addEventListener("DOMContentLoaded", ()=>{
  // thÃ¨me
  applyTheme(getTheme());

  const initLang=localStorage.getItem(prefLangKey)||"ar"; langSel.value=initLang; renderAll(initLang);
  updateThemeBtn(initLang);

  showPage(localStorage.getItem("last_page")||"plan");

  // rafraÃ®chit l'indicateur du crÃ©neau toutes les minutes
  setInterval(()=>renderPlan(langSel.value,T[langSel.value]),60*1000);

  langSel.addEventListener("change",()=>{const lang=langSel.value;localStorage.setItem(prefLangKey,lang);renderAll(lang);});
  notifyBtn.addEventListener("click",()=>enableNotifications(T[langSel.value]));
  themeBtn.addEventListener("click",()=>toggleTheme(langSel.value));

  checkAllBtn.addEventListener("click",()=>{const L=T[langSel.value],map={};L.tasks.forEach((_,i)=>map[i]=true);saveJSON(planStoreKey(langSel.value),map);renderPlan(langSel.value,L);});
  uncheckAllBtn.addEventListener("click",()=>{const L=T[langSel.value],map={};L.tasks.forEach((_,i)=>map[i]=false);saveJSON(planStoreKey(langSel.value),map);renderPlan(langSel.value,L);});
  resetDayBtn.addEventListener("click",()=>{localStorage.removeItem(planStoreKey(langSel.value));renderPlan(langSel.value,T[langSel.value]);});

  tabPlan.onclick=()=>showPage("plan");
  tabAdhkar.onclick=()=>showPage("adhkar");
  tabQuran.onclick=()=>showPage("quran");
});
</script>
</body>
</html>
